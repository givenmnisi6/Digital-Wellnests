[gd_scene load_steps=21 format=3 uid="uid://cnxd7db1y8nwr"]

[ext_resource type="Script" path="res://Scenes/Poems/Fish/Mails.gd" id="1_ht06a"]
[ext_resource type="Texture2D" uid="uid://by68v75qyopxy" path="res://Images/PhishingEmail.png" id="2_5xrtw"]
[ext_resource type="Texture2D" uid="uid://caun7f2lnkr5r" path="res://Images/safeEmail.png" id="2_pmhpg"]
[ext_resource type="Texture2D" uid="uid://duc5mgc5gnyl5" path="res://Images/safeLink.png" id="3_isbev"]
[ext_resource type="Texture2D" uid="uid://bn20qvooabhc1" path="res://Images/spamEmail.png" id="6_ithgg"]

[sub_resource type="GDScript" id="GDScript_a07pu"]
script/source = "extends Node2D


func _ready():
	%Smoke.material.set_shader_parameter(\"texture_offset\", Vector2(randfn(0.0, 1.0), randfn(0.0, 1.0)))
	%AnimationPlayer.play(\"explosion\")
	await %AnimationPlayer.animation_finished
	queue_free()
"

[sub_resource type="Shader" id="Shader_2h7o6"]
code = "shader_type canvas_item;

uniform sampler2D voronoi_sampler : repeat_enable;
uniform sampler2D edge_curve;
uniform float offset = 0.0;
uniform vec2 texture_offset = vec2(0.0);
uniform sampler2D color_gradient : source_color;

void fragment() {
	float voronoi = 1.0 - texture(voronoi_sampler, UV * 0.25 + texture_offset).x;
	float d = distance(UV, vec2(0.5)) * 2.0;
	float n_smooth_d = (voronoi * offset) * texture(edge_curve, vec2(d, 0.0)).x;
	COLOR.a *= step(0.5, n_smooth_d);
	COLOR.rgb = texture(color_gradient, vec2(n_smooth_d, 0.0)).rgb;
}
"

[sub_resource type="Gradient" id="Gradient_obal6"]
interpolation_mode = 1
offsets = PackedFloat32Array(0.105691, 0.7)
colors = PackedColorArray(0.878431, 0.878431, 0.878431, 1, 0.878431, 0.878431, 0.878431, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_mxd0d"]
gradient = SubResource("Gradient_obal6")

[sub_resource type="Curve" id="Curve_aov55"]
_data = [Vector2(0.752381, 1), 0.0, -4.03846, 0, 1, Vector2(1, 0), -4.03846, 0.0, 1, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_p664q"]
texture_mode = 1
curve = SubResource("Curve_aov55")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_ti4n0"]
noise_type = 2
fractal_octaves = 1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_uji5e"]
seamless = true
noise = SubResource("FastNoiseLite_ti4n0")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dssfe"]
resource_local_to_scene = true
shader = SubResource("Shader_2h7o6")
shader_parameter/offset = 2.0
shader_parameter/texture_offset = Vector2(0, 0)
shader_parameter/voronoi_sampler = SubResource("NoiseTexture2D_uji5e")
shader_parameter/edge_curve = SubResource("CurveTexture_p664q")
shader_parameter/color_gradient = SubResource("GradientTexture1D_mxd0d")

[sub_resource type="Animation" id="Animation_6fv2e"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoke:material:shader_parameter/offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [2.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Smoke:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Smoke:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.396078, 0.396078, 0.396078, 1)]
}

[sub_resource type="Animation" id="Animation_viyco"]
resource_name = "explosion"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Smoke:material:shader_parameter/offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [2.0, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Smoke:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(3, 3)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Smoke:modulate:a")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.1, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_8msef"]
_data = {
"RESET": SubResource("Animation_6fv2e"),
"explosion": SubResource("Animation_viyco")
}

[sub_resource type="PackedScene" id="PackedScene_k3c1i"]
_bundled = {
"conn_count": 0,
"conns": PackedInt32Array(),
"editable_instances": [],
"names": PackedStringArray("SmokeExplosion", "Node2D", "z_index", "script", "Smoke", "ColorRect", "unique_name_in_owner", "modulate", "material", "anchors_preset", "anchor_left", "anchor_top", "anchor_right", "anchor_bottom", "offset_left", "offset_top", "offset_right", "offset_bottom", "grow_horizontal", "grow_vertical", "pivot_offset", "color", "AnimationPlayer", "AnimationPlayer", "unique_name_in_owner", "libraries", "autoplay"),
"node_count": 3,
"node_paths": [NodePath("."), NodePath(".")],
"nodes": PackedInt32Array(-1, -1, 1, 0, -1, 2, 2, 0, 3, 1, 0, 1073741824, 0, 5, 4, -1, 16, 6, 2, 7, 3, 8, 4, 9, 5, 10, 6, 11, 7, 12, 8, 13, 9, 14, 10, 15, 11, 16, 12, 17, 13, 18, 14, 19, 15, 20, 16, 21, 17, 0, 1073741825, 0, 23, 22, -1, 3, 24, 18, 25, 19, 26, 20, 0),
"variants": [10, SubResource("GDScript_a07pu"), true, Color(0.396078, 0.396078, 0.396078, 1), SubResource("ShaderMaterial_dssfe"), 8, 0.5, 0.5, 0.5, 0.5, 306.0, 183.0, 434.0, 311.0, 2, 2, Vector2(64, 64), Color(0.568627, 0.568627, 0.568627, 1), true, {
"": SubResource("AnimationLibrary_8msef")
}, "RESET"],
"version": 3
}

[sub_resource type="SpriteFrames" id="SpriteFrames_i61p3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_pmhpg")
}],
"loop": true,
"name": &"safeEmail",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_isbev")
}],
"loop": true,
"name": &"safeLink",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_ithgg")
}],
"loop": true,
"name": &"spamEmail",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_5xrtw")
}],
"loop": true,
"name": &"spamLink",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nmak5"]
size = Vector2(618.807, 435.322)

[node name="Mails" type="CharacterBody2D"]
script = ExtResource("1_ht06a")
speed = 200.0
smoke_explosion = SubResource("PackedScene_k3c1i")

[node name="ItemsAnim" type="AnimatedSprite2D" parent="."]
position = Vector2(156.625, 493.375)
scale = Vector2(0.161621, 0.161621)
sprite_frames = SubResource("SpriteFrames_i61p3")
animation = &"safeEmail"
speed_scale = 0.2
metadata/_edit_lock_ = true

[node name="Area2D" type="Area2D" parent="ItemsAnim"]
position = Vector2(-969.087, -3052.66)
scale = Vector2(6.18731, 6.18731)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ItemsAnim/Area2D"]
position = Vector2(161, 500)
scale = Vector2(0.161621, 0.161621)
shape = SubResource("RectangleShape2D_nmak5")

[node name="Button" type="Button" parent="."]
self_modulate = Color(1, 1, 1, 0)
offset_left = 113.0
offset_top = 460.0
offset_right = 209.0
offset_bottom = 539.0

[node name="VisibilityTimer" type="Timer" parent="."]
wait_time = 8.0
autostart = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(161, 500.357)
scale = Vector2(0.161621, 0.161621)
shape = SubResource("RectangleShape2D_nmak5")

[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
[connection signal="timeout" from="VisibilityTimer" to="." method="_on_visibility_timer_timeout"]
